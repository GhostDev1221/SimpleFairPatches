---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/11/5 15:12
---
SkillConfig = {}
SkillConfig.skills = {}

function SkillConfig:init(config)
    self:initSkill(config)
end

function SkillConfig:initSkill(config)
    for id, skill in pairs(config) do
        local item = {}
        item.id = id
        item.name = skill.name
        item.icon = skill.icon
        item.itemId = tonumber(skill.itemId)
        item.atlasName = skill.atlasName
        item.iconName = skill.iconName
        item.fallSpeed = tonumber(skill.fallSpeed)
        item.cd = tonumber(skill.cd)
        item.range = tonumber(skill.range)
        item.damageType = tonumber(skill.damageType)
        item.effect = tonumber(skill.effect)
        item.moveSpeed = tonumber(skill.moveSpeed)
        item.targets = tonumber(skill.targets)
        item.occupation = tonumber(skill.occupation)
        item.duration = tonumber(skill.duration)
        item.distace = tonumber(skill.distace)
        item.useTime = tonumber(skill.useTime)
        self.skills[id] = item
    end
    self:prepareSkills()
end

function SkillConfig:prepareSkills()
    for id, skill in pairs(self.skills) do
        HostApi.addSkillItem(SkillConfig.newSkillItem(skill))
    end
end

function SkillConfig.newSkillItem(skill)
    local setting = SkillItem.new()
    setting.Occupation = skill.occupation
    setting.ItemId = skill.itemId
    setting.SkillId = tonumber(skill.id)
    setting.ItemSkillCd = skill.cd
    setting.ItemSkillDistace = skill.distace
    setting.MoveSpeed = skill.moveSpeed
    setting.DropSpeed = skill.fallSpeed
    setting.AtlasName = skill.atlasName
    setting.ItemIconName = skill.iconName
    return setting
end

function SkillConfig:getSkill(skillId)
    for i, skill in pairs(self.skills) do
        local id = tostring(skillId)
        if i == id then
            return skill
        end
    end
end

function SkillConfig:getSkillById(itemId)
    for i, skill in pairs(self.skills) do
        if skill.itemId == itemId then
            return skill
        end
    end
end

return SkillConfig