---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/11/19 11:35
---

SkillUtil = {}

function SkillUtil:useGrenades(initpos, area, player, effect, duration)
    local players = PlayerManager:getPlayers()
    local pos = VectorUtil.newVector3(initpos.x, initpos.y, initpos.z)
    EngineWorld:addSimpleEffect("explosion.effect", pos, player:getYaw(), 1000)
    EngineWorld:getWorld():createExplosion(player:getEntityPlayer(), player:getEntityPlayer(), pos, 0, false)
    for i, v in pairs(players) do
        if v.role ~= player.role then
            local position = v:getPosition()
            if area:inArea(position) then
                isHurt = 1
                v:subHealth(effect)
                v.entityPlayerMP:setOnHurt(duration * 1000)
            end
        end
    end
end

function SkillUtil:useChangeAnimal(area, player, duration)
    local players = PlayerManager:getPlayers()
    for i, v in pairs(players) do
        if v.role ~= player.role then
            local position = v:getPosition()
            if area:inArea(position) then
                v:changeAnimal(duration)
            end
        end
    end
end

return SkillUtil