---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Jimmy.
--- DateTime: 2018/10/23 0023 11:32
---
require "data.XGameCar"
require "data.XRailRoute"

XCarConfig = {}
XCarConfig.Cars = {}

function XCarConfig:OnInit(cars)
    self:initCars(cars)
end

function XCarConfig:initCars(cars)
    for _, car in pairs(cars) do
        local item = {}
        item.ID = tonumber(car.ID)
        item.Actor = car.Actor
        item.Name = car.Name
        item.Position = XTools:CastToVector(car.PosX, car.PosY, car.PosZ)
        item.Speed = tonumber(car.Speed)
        item.AddSpeed = tonumber(car.AddSpeed)
        item.Direction1 = tonumber(car.Direction1)
        item.Direction2 = tonumber(car.Direction2)
        item.RailRoute = XRailRoute.new(XRailRouteConfig:getRouteConfig(car.RailRouteID))
        table.insert(self.Cars, item)
    end
    table.sort(self.Cars, function (a, b)
        return a.ID < b.ID
    end)
end

function XCarConfig:prepareCars()
    for _, car in pairs(self.Cars) do
        XGameCar.new(car)
    end
end

return XCarConfig