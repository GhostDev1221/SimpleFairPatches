---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Jimmy.
--- DateTime: 2018/10/24 0024 11:25
---
XCarBuffConfig = {}
XCarBuffConfig.CarBuffs = {}

function XCarBuffConfig:OnInit(buffs)
    self:initBuffs(buffs)
end

function XCarBuffConfig:initBuffs(buffs)
    for _, buff in pairs(buffs) do
        local item = {}
        item.ID = buff.ID
        item.CarID = tonumber(buff.CarID)
        item.TeamID = tonumber(buff.TeamID)
        item.BuffName = buff.BuffName == '#' and '' or buff.BuffName
        item.TriggerKey = VectorUtil.hashVector3(XTools:CastToVector(buff.TriggerX, buff.TriggerY, buff.TriggerZ))
        local effect = StringUtil.split(buff.Effect, "#")
        item.Effect = {}
        item.Effect.ID = tonumber(effect[1] or "0")
        item.Effect.Time = tonumber(effect[2] or "0")
        item.Effect.Level = tonumber(effect[3] or "0")
        item.Health = tonumber(buff.Health)
        item.Triggered = false
        table.insert(self.CarBuffs, item)
    end
end

function XCarBuffConfig:getBuffByCarID(carId)
    local buffs = {}
    for _, buff in pairs(self.CarBuffs) do
        if buff.CarID == carId then
            buffs[buff.TriggerKey] = buff
        end
    end
    return buffs
end

return XCarBuffConfig