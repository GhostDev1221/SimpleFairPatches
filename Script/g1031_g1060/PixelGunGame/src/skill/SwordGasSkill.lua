---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Jimmy.
--- DateTime: 2019/1/9 0009 15:48
---
require "skill.BaseSkill"

SwordGasSkill = class("SwordGasSkill", BaseSkill)

function SwordGasSkill:initAttributes(itemId)
    self.addDamage = 0
    local creator = self:getCreator()
    if not creator then
        return
    end
    for _, gun in pairs(creator.equip_guns) do
        if gun.ItemId == itemId then
            self.addDamage = gun.AddDamage
            break
        end
    end
end

function SwordGasSkill:onPlayerEffected(player)
    local creator = self:getCreator()
    if not creator then
        return
    end
    player.onSkillDamageUid = creator.userId
    local damage = player:subDefense(self.damage + self.addDamage)
    player:subHealth(damage)
    player.onSkillDamageUid = 0
end

return SwordGasSkill