---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Jimmy.
--- DateTime: 2019/1/10 0010 21:01
---
require "skill.BaseSkill"

InvisibleSkill = class("InvisibleSkill", BaseSkill)
InvisibleSkill.AttributeType = {
    Duration = "6081"
}

function InvisibleSkill:onInitAttributeFinish()
    self.duration = self.duration + self:getAttributeById(InvisibleSkill.AttributeType.Duration)
end

function InvisibleSkill:createSkillEffect(name, time)
    local creator = self:getCreator()
    if #name > 6 and time > 0 then
        creator:addCustomEffect("InvisibleSkill", name, time)
    end
end

function InvisibleSkill:onPlayerEffected(player)
    LuaTimer:schedule(function(userId, time)
        local c_player = PlayerManager:getPlayerByUserId(userId)
        if not c_player then
            return
        end
        c_player:addEffect(PotionID.INVISIBILITY, time or 0, 1)
    end, 1, nil, player.userId, self:getLastTime())
end

return InvisibleSkill