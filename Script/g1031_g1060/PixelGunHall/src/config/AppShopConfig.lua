---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Jimmy.
--- DateTime: 2019/1/16 0016 10:38
---
AppShopConfig = {}
AppShopConfig.GoodsList = {}

function AppShopConfig:initTabConfig(tabs)
    local data = {}
    for _, tab in pairs(tabs) do
        table.insert(data, {
            Id = tonumber(tab.Id),
            Icon = tab.Icon or "",
            Name = tab.Name or ""
        })
    end
    table.sort(data, function (a, b)
        return a.Id < b.Id
    end)
    for _, tab in pairs(data) do
        EngineWorld:addGoodsGroupToShop(tonumber(tab.Id), tab.Icon, tab.Name)
    end
end

function AppShopConfig:initGoodsConfig(goods_list)
    local data = {}
    for _, goods in pairs(goods_list) do
        local item = {
            Id = tonumber(goods.Id),
            TabId = tonumber(goods.TabId),
            Count = tonumber(goods.Count),
            Name = goods.Name or "",
            Icon = goods.Icon or "",
            RealId = tonumber(goods.RealId),
            Type = tonumber(goods.Type),
            Time = tonumber(goods.Time),
            PriceType = tonumber(goods.PriceType),
            Price = tonumber(goods.Price)
        }
        table.insert(data, item)
        AppShopConfig.GoodsList[goods.Id] = item
    end
    table.sort(data, function (a, b)
        return a.Id < b.Id
    end)
    for _, item in pairs(data) do
        EngineWorld:addGoodsToShop(tonumber(item.TabId), AppShopConfig.newGoods(item))
    end
end

function AppShopConfig.newGoods(item)
    local goods = Goods.new()
    goods.itemId = item.Id
    goods.itemMeta = 0
    goods.itemNum = item.Count
    goods.coinId = item.PriceType
    goods.blockymodsPrice = item.Price
    goods.blockmanPrice = item.Price
    goods.limit = -1
    goods.desc = item.Name
    goods.icon = item.Icon
    return goods
end

function AppShopConfig:getGoodsById(goodsId)
    return AppShopConfig.GoodsList[tostring(goodsId)]
end

return AppShopConfig