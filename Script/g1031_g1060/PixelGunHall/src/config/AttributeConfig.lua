---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Jimmy.
--- DateTime: 2019/1/18 0018 19:00
---
AttributeConfig = {}
AttributeConfig.Attributes = {}

function AttributeConfig:initConfig(attributes)
    for _, attribute in pairs(attributes) do
        AttributeConfig.Attributes[attribute.Id] = {
            Id = attribute.Id,
            Value = tonumber(attribute.Value)
        }
    end
end

function AttributeConfig:getAttributeValue(id)
    local attribute = AttributeConfig.Attributes[id]
    if attribute ~= nil then
        return attribute.Value
    end
    return 0
end

function AttributeConfig:getBlockAttribute(config)
    local life = 0
    local count = 0
    local values = StringUtil.split(config, "#")
    if #values > 0 then
        local life_value = StringUtil.split(values[1], "=")
        if #life_value == 2 then
            count = AttributeConfig:getAttributeValue(life_value[1]) + tonumber(life_value[2])
        end
    end
    if #values > 1 then
        local count_value = StringUtil.split(values[2], "=")
        if #count_value == 2 then
            life = AttributeConfig:getAttributeValue(count_value[1]) + tonumber(count_value[2])
        end
    end
    count = math.max(count, 1)
    life = math.max(life, 1)
    return life, count
end

return AttributeConfig