---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Jimmy.
--- DateTime: 2018/12/30 0030 13:51
---
GunConfig = {}
GunConfig.Guns = {}

function GunConfig:initConfig(guns)
    for _, config in pairs(guns) do
        local gun = {}
        gun.Id = tonumber(config.Id)
        gun.ItemId = tonumber(config.ItemId)
        gun.TabType = config.TabType
        gun.PropertyIds = config.PropertyIds
        gun.MaxLevel = tonumber(config.MaxLevel)
        gun.PriceType = tonumber(config.PriceType) or 0
        gun.Price = tonumber(config.Price) or 0
        gun.UnlockLevel = tonumber(config.UnlockLevel)
        gun.HasGet = config.HasGet == "1"
        gun.Bullet = tonumber(config.Bullet)
        gun.SpareBullet = tonumber(config.SpareBullet)
        gun.BulletId = tonumber(config.BulletId) or 441
        table.insert(self.Guns, gun)
    end
    self:prepareGuns()
end

function GunConfig:prepareGuns()
    for i, gun in pairs(GunConfig.Guns) do
        HostApi.setBulletClipSetting(gun.BulletId, 64)
        HostApi.setGunSetting(GunConfig.newGunSetting(gun))
    end
end

function GunConfig.newGunSetting(item)
    local setting = GunPluginSetting.new()
    setting.gunId = item.ItemId
    setting.maxBulletNum = item.Bullet
    setting.bulletId = item.BulletId
    return setting
end

function GunConfig:getGun(gunId)
    for _, config in pairs(GunConfig.Guns) do
        if config.Id == gunId then
            return config
        end
    end
end

function GunConfig:getGunByItemId(itemId)
    for _, config in pairs(GunConfig.Guns) do
        if config.ItemId == itemId then
            return config
        end
    end
end

return GunConfig