---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by work.
--- DateTime: 2018/7/9 10:56
---
require "base.util.VectorUtil"

SkillEffectConfig = {}
SkillEffectConfig.skillEffects = {}

function SkillEffectConfig:init(skillEffects)
    self:initSkillEffects(skillEffects)
end

function SkillEffectConfig:initSkillEffects(skillEffects)
    for id, skill in pairs(skillEffects) do
        local item = {}
        item.id = id
        item.name = skill.name
        item.duration = tonumber(skill.duration)
        item.width = tonumber(skill.width)
        item.height = tonumber(skill.height)
        item.density = tonumber(skill.density)
        local color = StringUtil.split(skill.color or "1#1#1", "#")
        item.color = VectorUtil.newVector3(tonumber(color[1] or "1"), tonumber(color[2] or "1"), tonumber(color[3] or "1"))
        self.skillEffects[id] = item
    end
    self:prepareSkillEffects()
end

function SkillEffectConfig:prepareSkillEffects()
    for id, skill in pairs(self.skillEffects) do
        HostApi.addSkillEffect(SkillEffectConfig.newSkillEffect(skill))
    end
end

function SkillEffectConfig.newSkillEffect(item)
    local setting = SkillEffect.new()
    setting.id = item.id
    setting.name = item.name
    setting.duration = item.duration
    setting.width = item.width
    setting.height = item.height
    setting.density = item.density
    setting.color = item.color
    return setting
end

return SkillEffectConfig