---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by work.
--- DateTime: 2018/7/30 9:39
---

GamePotionEffect = {}

GamePotionEffect.RESOURCE_OUTPUT_SPEED = 1   --领取点资源产出速度+x
GamePotionEffect.ADD_HP = 2                  --生命值增加+x
GamePotionEffect.ADD_MOVE_SPEED = 3          --移动速度增加+x
GamePotionEffect.DURATION_RETURN_HP = 4      --每K秒恢复x点生命
GamePotionEffect.ADD_STEAL_PERCENT = 5       --偷取比例增加 +0.x(0.3)
GamePotionEffect.ADD_DEFENSE = 6             --防御值增加+x
GamePotionEffect.LOW_HP_HEIGTH_DEFENSE = 7   --生命值越低，防御越高
GamePotionEffect.LOW_HP_HEIGTH_LEECH = 8     --攻击时吸血
GamePotionEffect.LOW_HP_HEIGTH_ATTACK = 9    --生命值越低，攻击力越高
GamePotionEffect.LOW_HP_TELEPORT = 10        --生命值低于X时，随机传送到一个地方(坐标可配置)
GamePotionEffect.ADD_ATTCK_BY_KILL = 11      --每击杀一个不同职业的玩家可以增加自身攻击力+x,其能力不可被偷取（死亡重置）
GamePotionEffect.ADD_RESOURCE_OUTPUT = 12    --领地资源增产*x
GamePotionEffect.GET_MONEY_BY_KILL = 13      --击杀敌人可获得敌人领地金钱的x%
GamePotionEffect.ADD_MAXHP_BY_KILL = 14      --击杀敌人可增加生命值最大生命值上限+x,并回满生命值（死亡重置）
GamePotionEffect.ADD_ATTACK = 15             --增加攻击力+x

function GamePotionEffect:addPotionEffect(player, config)
    if config.effect.id == self.RESOURCE_OUTPUT_SPEED then
        player.isPotionEffect = true
        self:enhanceResourceOutput(player, config)
    elseif config.effect.id == self.ADD_HP then
        player.isPotionEffect = true
        self:enhanceAddHp(player, config)
    elseif config.effect.id == self.ADD_MOVE_SPEED then
        player.isPotionEffect = true
        self:enhanceAddMoveSpeed(player, config)
    elseif config.effect.id == self.DURATION_RETURN_HP then
        player.isPotionEffect = true
        self:enhanceDurationReturnHp(player, config)
    elseif config.effect.id == self.ADD_STEAL_PERCENT then
        player.isPotionEffect = true
        self:enhanceAddStealPercent(player, config)
    elseif config.effect.id == self.ADD_DEFENSE then
        player.isPotionEffect = true
        self:enhanceAddDefense(player, config)
    elseif config.effect.id == self.LOW_HP_HEIGTH_DEFENSE then
        player.isPotionEffect = true
        self:enhanceLowHpHeigthDefense(player, config)
    elseif config.effect.id == self.LOW_HP_TELEPORT then
        player.isPotionEffect = true
        self:enhanceLowHpTeleport(player, config)
    elseif config.effect.id == self.ADD_ATTACK then
        player.isPotionEffect = true
        self:enhanceAddAttack(player, config)
    elseif config.effect.id == self.ADD_MAXHP_BY_KILL then
        player.isPotionEffect = true
        self:enhanceAddMaxhpByKill(player, config)
    elseif config.effect.id == self.GET_MONEY_BY_KILL then
        player.isPotionEffect = true
        self:enhanceGetMoneyByKill(player, config)
    elseif config.effect.id == self.LOW_HP_HEIGTH_LEECH then
        player.isPotionEffect = true
        self:enhanceLowHpHeigthLeech(player, config)
    elseif config.effect.id == self.LOW_HP_HEIGTH_ATTACK then
        player.isPotionEffect = true
        self:enhanceLowHpHeigthAttack(player, config)
    elseif config.effect.id == self.ADD_RESOURCE_OUTPUT then
        player.isPotionEffect = true
        self:enhanceAddResourceOutput(player, config)
    elseif config.effect.id == self.ADD_ATTCK_BY_KILL then
        player.isPotionEffect = true
        self:enhanceAddAttackByKill(player, config)
    end
end

function GamePotionEffect:hintPotionEffect(player, effect)
    if effect.id == self.RESOURCE_OUTPUT_SPEED then
        self:hintResourceOutput(player)
    elseif effect.id == self.ADD_HP then
        self:hintAddHp(player)
    elseif effect.id == self.ADD_MOVE_SPEED then
        self:hintAddMoveSpeed(player)
    elseif effect.id == self.DURATION_RETURN_HP then
        self:hintDurationReturnHp(player)
    elseif effect.id == self.ADD_STEAL_PERCENT then
        self:hintAddStealPercent(player)
    elseif effect.id == self.ADD_DEFENSE then
        self:hintAddDefense(player)
    elseif effect.id == self.LOW_HP_HEIGTH_DEFENSE then
        self:hintLowHpHeigthDefense(player)
    elseif effect.id == self.LOW_HP_TELEPORT then
        self:hintLowHpTeleport(player)
    elseif effect.id == self.ADD_ATTACK then
        self:hintAddAttack(player)
    elseif effect.id == self.ADD_MAXHP_BY_KILL then
        self:hintAddMaxhpByKill(player)
    elseif effect.id == self.GET_MONEY_BY_KILL then
        self:hintGetMoneyByKill(player)
    elseif effect.id == self.LOW_HP_HEIGTH_LEECH then
        self:hintLowHpHeigthLeech(player)
    elseif effect.id == self.LOW_HP_HEIGTH_ATTACK then
        self:hintLowHpHeigthAttack(player)
    elseif effect.id == self.ADD_RESOURCE_OUTPUT then
        self:hintAddResourceOutput(player)
    elseif effect.id == self.ADD_ATTCK_BY_KILL then
        self:hintAddAttackByKill(player)
    end
end

function GamePotionEffect:enhanceResourceOutput(player, config)
    if player.domain ~= nil then
        player.ownPotionIds[#player.ownPotionIds + 1] = config.id
        player.domain.resource:enhanceResourceOutputIncrement(config.effect.value)
    end
end

function GamePotionEffect:enhanceAddHp(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player:changeMaxHealth(player.maxHealth + config.effect.value)
    player.maxHealth = player.maxHealth + config.effect.value
end

function GamePotionEffect:enhanceAddMoveSpeed(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player:setSpeedAddition(config.effect.value)
end

function GamePotionEffect:enhanceDurationReturnHp(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.isHealPotion = true
    player.interval = config.effect.time
    player.healHp = config.effect.value
end

function GamePotionEffect:enhanceAddStealPercent(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player:changePlayerStealPercent(config.effect.value)
end

function GamePotionEffect:enhanceAddDefense(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player:setAddDefense(config.effect.value)
end

function GamePotionEffect:enhanceLowHpHeigthDefense(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.ownPotionEffects[tostring(config.id)] = config
end
function GamePotionEffect:enhanceLowHpTeleport(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.ownPotionEffects[tostring(config.id)] = config
end
function GamePotionEffect:enhanceAddAttack(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player:setAddAttack(config.effect.value)
end
function GamePotionEffect:enhanceAddMaxhpByKill(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.ownPotionEffects[tostring(config.id)] = config
end
function GamePotionEffect:enhanceGetMoneyByKill(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.ownPotionEffects[tostring(config.id)] = config
end
function GamePotionEffect:enhanceLowHpHeigthLeech(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.ownPotionEffects[tostring(config.id)] = config
end
function GamePotionEffect:enhanceLowHpHeigthAttack(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.ownPotionEffects[tostring(config.id)] = config
end
function GamePotionEffect:enhanceAddResourceOutput(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.resourceValue = config.effect.value
end
function GamePotionEffect:enhanceAddAttackByKill(player, config)
    player.ownPotionIds[#player.ownPotionIds + 1] = config.id
    player.ownPotionEffects[tostring(config.id)] = config
end

--提示
function GamePotionEffect:hintResourceOutput(player)
    if player.domain ~= nil then
        MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceResourceOutput())
    end
end

function GamePotionEffect:hintAddHp(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceAddHp())
end

function GamePotionEffect:hintAddMoveSpeed(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceAddMoveSpeed())
end

function GamePotionEffect:hintDurationReturnHp(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceDurationReturnHp())
end

function GamePotionEffect:hintAddStealPercent(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceAddStealPercent())
end

function GamePotionEffect:hintAddDefense(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceAddDefense())
end

function GamePotionEffect:hintLowHpHeigthDefense(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceLowHpHeigthDefense())
end

function GamePotionEffect:hintLowHpHeigthLeech(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceLowHpHeigthLeech())
end

function GamePotionEffect:hintLowHpHeigthAttack(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceLowHpHeigthAttack())
end

function GamePotionEffect:hintLowHpTeleport(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceLowHpTeleport())
end

function GamePotionEffect:hintAddAttackByKill(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceAddAttackByKill())
end

function GamePotionEffect:hintAddResourceOutput(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceAddResourceOutput())
end

function GamePotionEffect:hintGetMoneyByKill(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceGetMoneyByKill())
end

function GamePotionEffect:hintAddMaxhpByKill(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceAddMaxhpByKill())
end

function GamePotionEffect:hintAddAttack(player)
    MsgSender.sendCenterTipsToTarget(player.rakssid, 2, Messages:enhanceAddAttack())
end

function GamePotionEffect:onRemovePotionEffect(player)
    if player.isPotionEffect then
        if player.domain ~= nil and player.domain.resource ~= nil then
            player.domain.resource:onRemoveResourceOutputIncrement()
        end
        player:setSpeedAddition(0)
        player:onRemoveStealPercentPotion()
        player:onRemoveHealHp()
        player:resetDefense()
        player:resetAttack()
    end
end

return GamePotionEffect